یه تسکی دارم باید سیستم کد تخفیف راه بندازم برای دیزل خودرو
نشستم فکر کردم و یه سیستمی چیدم و جلسه گذاشتیم و به یه اجماعی رسیدیم
ولی مسئله اینه کلا این طراحی ها همیشه ناقص هستن
وسط پیاده سازی کد یاد این افتادم که نباید موقع ولیدیشن یه سری پیام ها رو به کاربر بدیم
مثلا یه کدی ایجاد کردیم برای یه کمپین که قراره از ۳ روز دیگه شروع بشه اگه کاربری بیاد و این کد رو وارد کنه نباید بگیم این کد هنوز شروع نشده و ... فقط باید بگیم اعتبار نداره یا اشتباهه
البته که خیلی به بیزینس ربط داره و اصلا ممکنه برای ترغیب کاربر یه جایی بخواییم همچین پیامی بدیم
اما در کل من برای این موضوع با جمینای بیشتر صحبت کردم و یه سری پینشهادات بیشتری داد
علاوه بر اینکه یه سری چیزا رو  نباید بگم یه سری سوال برام ایجاد کرد و گفت اگه مثلا کاربر کد تخفیف رو وارد کنه و به سرور برسه و پردازش انجام بشه و برای سفارش کاربر ثبت بشه اما موقع برگشت ریسپانس  اینترنت کاربر قطع بشه چه اتفاقی باید بیوفته؟ کاربر که تخفیف رو نمیبینه پس دوباره کد رو میزنه و نباید دیگه براش ثبت بشه.
اینطوری شد که مفهوم timeout رو بیشتر درک کردم
ما ۲ مدل تایم اوت داریم یکی سمت سرور یکی هم سمت کلاینت
اگه کلاینت یه ریکوئستی رو کلا نتونه بفرسته و اینترنتش قطع باشه ما سمت جی اس باید این رو هندل کنیم و بگیم ارتباط نداری
اگه بتونه درخواست رو بفرسته دوحالت باز میشه
اگه درخواست به سرور برسه و سرور نتونه پردازش کنه و طول بکشه باز هم باید سمت کلاینت این رو چک کنیم و بگیم سرور نتونست پاسخ بده و طول کشید یه بار دیگه تست کن
اگه هم به سرور برسه و پردازش انجام بشه اما قبل از رسیدن ریسپانس، اینترنت کاربر قطع بشه چون سوکت بسته میشه 
باز هم باید فرانت این رو هندل کنه
خب اگه بخوام دقیق و فنی تر بررسی کنیم
وقتی یه ارتباطی تو دنیای شبکه بخواییم برقرار کنیم یه سوکت سمت کاربر باز میشه و یه سوکت سمت سرور
سوکت رو هم با آیپی و پورت میشناسیم
اگه اینترنت قطع بشه از اونجایی که سوکت هم آیپی اش عوض میشه دیگه نمیتونه مسیر رو پیدا کنه و در نتیجه خطای تایم اوت یا خطای مناسب برمیگردونیم
خب برام سوال بود وقتی یه سوکتی باز میشه حتی اگه او اس بیاد اون رو ببنده باز از قبل چون باز بوده سرور باید یه خاطره ای داشته باشه
این پروتکل و نحوه مدیریت تو http نیست و نداریم
اما اونطوری که خوندم گوگل یه پروتکلی رو داده بیرون که این رو هندل میکنه و به هر درخواست یه آیدی میده و حتی اگه قطع بشه اینترنت کاربر، باز هم میتونه ریسپانس رو بگیره
به این معنی که اگه اینترنت قطع بشه در ورژن های قبلی اچ تی تی پی، وقتی وصل بشه دوباره باید درخواست بدی ولی تو نسخه جدید اچ تی تی پی هرجایی قطع بشه و بعدش وصل بشه از همون ادامه جایی که قطع شده میره
و اگه نوع ایترنت عوض بشه مثلا از روی وای فای بریم روی دیتای موبایل چون آيپی عوض میشه ولی از اونجایی که به کانکشن یه آیدی خصوصی داده میفهمه که باید به کی جواب رو برگردونه
http استیت لس هست و برای همین بعد از اینکه یه درخواست و ریسپانس کارش تموم شد وب سرور اونو از یاد میبره
تا قبلش هم تو یه حافظه موقت تو رم ذخیره میکنه

یه چیز دیگه هم یادگرفتم اینکه متد های اج تی تی پی شامل گت و پست و پچ و پوت و دیلیت در رست ای پی آی مطابق با CRUD دیتابیس تنظیم میشه
اصلا فلسفه رست ای پی آی همینه
یعنی متد گت برای read کردن دیتابیس استفاده میشه
پست برای create
و الی آخر
حالا تو گت ما چون آدرس رو در یو آر ال داریم و متغیر ها رو اونجا اضافه میکنیم در حافظه و کش مرورگر میمونه برای همین باید دقت کنیم از چه متدی درسته استفاده کنی
مثلا اگه کد تخفیف رو بخواییم وارد کنیم نباید از طریق متد گت بره چون هم از نظر مفهومی درست نیست (چون صرفا قرار نیست یه چیزی فچ بشه و داره تو دیتابیس تغییراتی ایجاد میشه) و هم اینکه تو حافظه میمونه و از نظر امنیتی هم درست نیست
واسه همین متد پست خیلی مناسبه
متد پست میاد داده ها رو تو بادی میفرسته و تو وب سرور هم به طور دیفالت ذخیره نمیشه برعکس متد گت که تو وب سرور لاگش میوفته
بدنه درخواست پست در وب سرور ذخیره نمیشه مگر اینکه بگیم لاگش رو سیو کنه ولی از اونجایی که کلا حجم اضافه میگیره و برای دیباگ کارمون سخت میشه لاگ کردنش بی خودیه.

اون چیزی که راجب گوگل گفتم نسخه جدید http هست
ورژن ۳ رو داده بیرون و بر روی quic سوار میشه
در نسخه های قبلی اچ تی تی پی، پروتکل زیرینش tcp بوده اما الان udp اما یه نسخه تغییر یافته از اون
