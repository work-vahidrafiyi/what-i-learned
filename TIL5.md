فرض کن کد تخفیف ثبت شده ولی ریسپانش به کاربر برنگشته به هر دلیلی چه سمت بک اند چه فرانت اند.
حالا اگه کاربر دوباره وارد کنه باید یه قابلیتی داشته باشیم که چک کنیم این قبلا ثبت شده یا نه
جند تا کار میتونیم انجام بدیم
۱- به ازای هر کلاینت یه آیدی یونیک سمت کاربر تولید بشه و این آیدی تو دیتابیس یا ردیس ذخیره بشه و اگه این اتفاق افتاد وقتی دوباره درخواست زد کاربر، اون آیدی رو چک کنیم و ببینیم قبلا با این آیدی چیزی پردازش شده یا نه و اگه شده بود دیگه پردازش جدیدی انجام نشه و همون نتیجه قبلی ارسال بشه
۲- روش دوم اینه بدون نیاز به آیدی یونیک ما از یه طریقی بفهمیم این کاربر کد تخفیفش ثبت شده یا نه
مثلا ما برای هر سفارشی یه discount_id داشته باشیم که اگه پر بود پس ثبت شده و اگه نبود خالیه
حالا میتونیم دقیق تر چک کنیم که این discount_id برای همین کد تخفیفی هست که ثبت شده یا کد تخفیف جدیده

به این کار میگن idempotency
یعنی تکرار پذیری
یعنی هر چند بار که یه کار تکراری داره از سمت کاربر انجام بشه ما هم نتیجه تکراری برگردونیم بدون اینکه تغییری در دیتابیس ایجاد بشه یا پردازش جدیدی صورت بگیره

آیدم‌پوتنسی یعنی: «انجام یک عملیات برای بار دوم، وضعیت سیستم را تغییر ندهد (No Side Effect) و همان نتیجه‌ی بار اول را برگرداند.»